<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Education Bar Chart</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<div>
    <canvas id="educationChart"></canvas>
</div>

<script>
  // The data points you provided
  const dataPoints = [
    { year: 2012, gender: 'female', percent_none: 0.003253381 },
    { year: 2012, gender: 'male', percent_none: 0.003517549 },
    { year: 2013, gender: 'male', percent_none: 0.003703471 },
    { year: 2013, gender: 'female', percent_none: 0.004649745 },
    { year: 2014, gender: 'male', percent_none: 0.002540115 },
    { year: 2014, gender: 'female', percent_none: 0.004481960 },
    { year: 2015, gender: 'male', percent_none: 0.003342652 },
    { year: 2015, gender: 'female', percent_none: 0.002198608 },
    { year: 2016, gender: 'male', percent_none: 0.002765753 },
    { year: 2016, gender: 'female', percent_none: 0.002445164 },
    { year: 2017, gender: 'male', percent_none: 0.004580879 },
    { year: 2017, gender: 'female', percent_none: 0.003490526 },
    { year: 2018, gender: 'male', percent_none: 0.003859875 },
    { year: 2018, gender: 'female', percent_none: 0.001946743 },
    { year: 2019, gender: 'male', percent_none: 0.005167809 },
    { year: 2019, gender: 'female', percent_none: 0.003524777 },
    { year: 2020, gender: 'male', percent_none: 0.002976190 },
    { year: 2020, gender: 'female', percent_none: 0.001980333 },
    { year: 2021, gender: 'female', percent_none: 0.001820354 },
    { year: 2021, gender: 'male', percent_none: 0.002769522 }
  ];

  // Process data to fit Chart.js structure
  const labels = [...new Set(dataPoints.map(data => data.year))];
  const femaleData = dataPoints.filter(data => data.gender === 'female').map(data => data.percent_none);
  const maleData = dataPoints.filter(data => data.gender === 'male').map(data => data.percent_none);

  const data = {
    labels: labels,
    datasets: [
      {
        label: 'Female',
        data: femaleData,
        backgroundColor: 'rgba(255, 99, 132, 0.5)',
        borderColor: 'rgba(255, 99, 132, 1)',
        borderWidth: 1
      },
      {
        label: 'Male',
        data: maleData,
        backgroundColor: 'rgba(54, 162, 235, 0.5)',
        borderColor: 'rgba(54, 162, 235, 1)',
        borderWidth: 1
      }
    ]
  };

  const config = {
    type: 'bar',
    data: data,
    options: {
      scales: {
        y: {
          beginAtZero: true
        }
      },
      plugins: {
        title: {
          display: true,
          text: 'Percentage of People with No Education by Year and Gender'
        },
        legend: {
          display: true,
          position: 'top',
        }
      }
    },
  };

  const educationChart = new Chart(
    document.getElementById('educationChart'),
    config
  );
</script>

</body>
</html>
